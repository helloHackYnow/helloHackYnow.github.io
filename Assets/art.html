<html><head><title>Philo : L'Art</title>
        <script
          src="https://cdnjs.cloudflare.com/ajax/libs/cytoscape/3.22.1/cytoscape.min.js"
          integrity="sha512-KTe+SDYh8ExHDmrSZuoKkFoFQDSU3ywInRi9SkE0ENpJu72GS+UAxd/l0CAXF8DaGGGOLKd7wKRoa7mEirvIpg=="
          crossorigin="anonymous"
          referrerpolicy="no-referrer"
        ></script>
        <script src="https://code.jquery.com/jquery-3.0.0.js"></script>
        <script src="https://unpkg.com/konva@7.0.3/konva.min.js"></script>
      
        <style>
          body {
            font-family: helvetica neue, helvetica, liberation sans, arial,
              sans-serif;
            font-size: 14px;
            overflow-x: hidden;
            overflow-y: hidden;
          }

          #cy {
            position: absolute;
            left: 0;
            top: 0;
            bottom: 0;
            right: 0;
            z-index: 999;
          }
          #titlename {
            position: absolute;
            top: 10px;
            width: 100%;
            color: grey;
            font-size: 24px;
            z-index: 1000;
            font-style: italic;
            text-align: center;
          }
          #sidebar {
            position: absolute;
            left: 10;
            top: 10;
            width: 300px;
            height: 200px;
            border: 1px solid black;
           
            z-index: 1001;
            background-color: white;
            resize: both;
            overflow: auto;
            display: inline-block;

          }
          #sidebarheader {
            padding: 10px;
            cursor: move;
            z-index: 10;
            background-color: #2196F3;
            color: #fff;
            z-index: 1002;
          }
          #sidebarcontent {
             padding: 10px 10px;
          }
          #tbnote {
            position:absolute;
            margin:5px 10px;
            bottom:0;
            right:0;
            font-size:12px;
            color:grey;
            display:inline-block;
            z-index:2000;
          }

          h1 {
            opacity: 0.5;
            font-size: 1em;
            font-weight: bold;
          }
          #searchbox{
            position: absolute;
            top:10px;
            right:10px;
            display: inline-block;
            background-color: white;
            width: 200px;
            z-index: 99999;
          }
          #searchresults {
            position: absolute;
            top:30px;
            right:10px;
            display: none;
            background-color: white;
            width: 200px;
            max-height: 200px;
            border: 1px solid grey;
            z-index: 99999;
            overflow-y: auto;
          }
          #result-message {
            padding:10px;
          }
          ul {
            list-style-type: none;
            padding-inline-start:0px;
            margin-block-start:0px;
          }
          li {
            border-bottom: 1px solid grey;
            padding-left:10px;
          }
          li:hover {
            background-color: grey;
            color:white;
            cursor:pointer;
          }
        </style>
      <script>document.addEventListener("DOMContentLoaded", function() {!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.cytoscapeEdgeEditing=t():e.cytoscapeEdgeEditing=t()}(self,(function(){return(()=>{"use strict";var e={347:(e,t,n)=>{var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=n(218),s=n(259),d=n(171),a=n(961),r=0;e.exports=function(e,t){var n=e;s.options=e;var c,l,g,h,u,y,v,p,f,x,m,b,A,P,C,w,T,E,M,S="cy-edge-bend-editing-cxt-add-bend-point"+r,I="cy-edge-bend-editing-cxt-remove-bend-point"+r,D="cy-edge-bend-editing-cxt-remove-multiple-bend-point"+r,F="cy-edge-control-editing-cxt-add-control-point"+r,R="cy-edge-control-editing-cxt-remove-control-point"+r,O="cy-edge-bend-editing-cxt-remove-multiple-control-point"+r,B=null,K=null,W=!1,k={init:function(){a(t,s,e);var n=e,o=$(this),k="cy-node-edge-editing-stage"+r;r++;var z,N,L=$('<div id="'+k+'"></div>');o.find("#"+k).length<1&&o.append(L),(z=Konva.stages.length<r?new Konva.Stage({id:"node-edge-editing-stage",container:k,width:o.width(),height:o.height()}):Konva.stages[r-1]).getChildren().length<1?(N=new Konva.Layer,z.add(N)):N=z.getChildren()[0];var U={edge:void 0,edgeType:"none",anchors:[],touchedAnchor:void 0,touchedAnchorIndex:void 0,bindListeners:function(e){e.on("mousedown touchstart",this.eMouseDown)},unbindListeners:function(e){e.off("mousedown touchstart",this.eMouseDown)},eMouseDown:function(e){t.autounselectify(!1),W=!0,U.touchedAnchor=e.target,M=!1,U.edge.unselect();var n=s.syntax[U.edgeType].weight,o=s.syntax[U.edgeType].distance,i=U.edge;ue={edge:i,type:U.edgeType,weights:i.data(n)?[].concat(i.data(n)):[],distances:i.data(o)?[].concat(i.data(o)):[]},T=t.style()._private.coreStyle["active-bg-opacity"]?t.style()._private.coreStyle["active-bg-opacity"].value:.15,t.style().selector("core").style("active-bg-opacity",0).update(),ae(),t.autoungrabify(!0),N.getStage().on("contentTouchend contentMouseup",U.eMouseUp),N.getStage().on("contentMouseout",U.eMouseOut)},eMouseUp:function(e){W=!1,U.touchedAnchor=void 0,M=!1,U.edge.select(),t.style().selector("core").style("active-bg-opacity",T).update(),re(),t.autounselectify(!0),t.autoungrabify(!1),N.getStage().off("contentTouchend contentMouseup",U.eMouseUp),N.getStage().off("contentMouseout",U.eMouseOut)},eMouseOut:function(e){M=!0},clearAnchorsExcept:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0,n=!1;this.anchors.forEach((function(o,i){t&&o===t?n=!0:(e.unbindListeners(o),o.destroy())})),n?this.anchors=[t]:(this.anchors=[],this.edge=void 0,this.edgeType="none")},renderAnchorShapes:function(e){if(this.edge=e,this.edgeType=s.getEdgeType(e),e.hasClass("edgebendediting-hasbendpoints")||e.hasClass("edgecontrolediting-hascontrolpoints")){for(var t=s.getAnchorsAsArray(e),n=.65*ie(e),o=(e.source().position(),e.target().position(),0);t&&o<t.length;o+=2){var i=t[o],d=t[o+1];this.renderAnchorShape(i,d,n)}N.draw()}},renderAnchorShape:function(e,n,o){var i=ne({x:e-o/2,y:n-o/2});o*=t.zoom();var s=new Konva.Rect({x:i.x,y:i.y,width:o,height:o,fill:"black",strokeWidth:0,draggable:!0});this.anchors.push(s),this.bindListeners(s),N.add(s)}},j=function(e,n){var o=e.target||e.cyTarget;if(!s.isIgnoredEdge(o)){var i,d,a,r,c=s.getEdgeType(o);"none"===c?(i=[],d=[]):(a=s.syntax[c].weight,r=s.syntax[c].distance,i=o.data(a)?[].concat(o.data(a)):o.data(a),d=o.data(r)?[].concat(o.data(r)):o.data(r));var l={edge:o,type:c,weights:i,distances:d};s.addAnchorPoint(void 0,void 0,n),te().undoable&&t.undoRedo().do("changeAnchorPoints",l)}oe(),o.select()},q=function(e){var n=U.edge,o=s.getEdgeType(n);if(!s.edgeTypeNoneShouldntHappen(o,"UiUtilities.js, cxtRemoveAnchorFcn")){var i={edge:n,type:o,weights:[].concat(n.data(s.syntax[o].weight)),distances:[].concat(n.data(s.syntax[o].distance))};s.removeAnchor(),te().undoable&&t.undoRedo().do("changeAnchorPoints",i),setTimeout((function(){oe(),n.select()}),50)}},_=function(e){var n=U.edge,o=s.getEdgeType(n),i={edge:n,type:o,weights:[].concat(n.data(s.syntax[o].weight)),distances:[].concat(n.data(s.syntax[o].distance))};s.removeAllAnchors(),te().undoable&&t.undoRedo().do("changeAnchorPoints",i),setTimeout((function(){oe(),n.select()}),50)},H=n.handleReconnectEdge,V=n.validateEdge,X=n.actOnUnsuccessfulReconnection,G=[{id:S,content:n.addBendMenuItemTitle,selector:"edge",onClickFunction:function(e){j(e,"bend")},hasTrailingDivider:n.useTrailingDividersAfterContextMenuOptions},{id:I,content:n.removeBendMenuItemTitle,selector:"edge",onClickFunction:q,hasTrailingDivider:n.useTrailingDividersAfterContextMenuOptions},{id:D,content:n.removeAllBendMenuItemTitle,selector:n.enableMultipleAnchorRemovalOption&&":selected.edgebendediting-hasmultiplebendpoints",onClickFunction:_,hasTrailingDivider:n.useTrailingDividersAfterContextMenuOptions},{id:F,content:n.addControlMenuItemTitle,selector:"edge",coreAsWell:!0,onClickFunction:function(e){j(e,"control")},hasTrailingDivider:n.useTrailingDividersAfterContextMenuOptions},{id:R,content:n.removeControlMenuItemTitle,selector:"edge",coreAsWell:!0,onClickFunction:q,hasTrailingDivider:n.useTrailingDividersAfterContextMenuOptions},{id:O,content:n.removeAllControlMenuItemTitle,selector:n.enableMultipleAnchorRemovalOption&&":selected.edgecontrolediting-hasmultiplecontrolpoints",onClickFunction:_,hasTrailingDivider:n.useTrailingDividersAfterContextMenuOptions}];if(t.contextMenus){var J=t.contextMenus("get");J.isActive()?J.appendMenuItems(G):t.contextMenus({menuItems:G})}var Q=i((function(){L.attr("height",o.height()).attr("width",o.width()).css({position:"absolute",top:0,left:0,"z-index":te().zIndex}),setTimeout((function(){var e=L.offset(),n=o.offset();L.css({top:-(e.top-n.top),left:-(e.left-n.left)}),N.getStage().setWidth(o.width()),N.getStage().setHeight(o.height()),t&&oe()}),0)}),250);function Y(){Q()}Y(),$(window).bind("resize",(function(){Y()}));var Z,ee=o.data("cyedgeediting");function te(){return Z||(Z=o.data("cyedgeediting").options)}function ne(e){var n=t.pan(),o=t.zoom();return{x:e.x*o+n.x,y:e.y*o+n.y}}function oe(){U.clearAnchorsExcept(U.touchedAnchor),null!==B&&(B.destroy(),B=null),null!==K&&(K.destroy(),K=null),N.draw(),E&&(U.renderAnchorShapes(E),function(e){if(e){var n=s.getAnchorsAsArray(e);void 0===n&&(n=[]);var o=e.sourceEndpoint(),i=e.targetEndpoint();if(o.x&&i.x&&(n.unshift(o.y),n.unshift(o.x),n.push(i.x),n.push(i.y),n)){var d={x:n[0],y:n[1]},a={x:n[n.length-2],y:n[n.length-1]},r={x:n[2],y:n[3]},c={x:n[n.length-4],y:n[n.length-3]};!function(e,n,o,i,s){var d=n.x-o/2,a=n.y-o/2,r=i.x-o/2,c=i.y-o/2,l=s.x-o/2,g=s.y-o/2,h=ne({x:e.x-o/2,y:e.y-o/2}),u=ne({x:d,y:a});o=o*t.zoom()/2;var y=ne({x:r,y:c}),v=ne({x:l,y:g}),p=o,f=Math.sqrt(Math.pow(y.x-h.x,2)+Math.pow(y.y-h.y,2)),x=h.x+p/f*(y.x-h.x),m=h.y+p/f*(y.y-h.y),b=Math.sqrt(Math.pow(v.x-u.x,2)+Math.pow(v.y-u.y,2)),A=u.x+p/b*(v.x-u.x),P=u.y+p/b*(v.y-u.y);null===B&&(B=new Konva.Circle({x:x+o,y:m+o,radius:o,fill:"black"})),null===K&&(K=new Konva.Circle({x:A+o,y:P+o,radius:o,fill:"black"})),N.add(B),N.add(K),N.draw()}(d,a,.65*ie(e),r,c)}}}(E))}function ie(e){var t=te().anchorShapeSizeFactor;return parseFloat(e.css("width"))<=2.5?2.5*t:parseFloat(e.css("width"))*t}function se(e,t,n,o,i){return e>=o-n/2&&e<=o+n/2&&t>=i-n/2&&t<=i+n/2}function de(e,t,n){var o=s.getEdgeType(n);if("none"===o)return-1;if(null==n.data(s.syntax[o].weight)||0==n.data(s.syntax[o].weight).length)return-1;for(var i=s.getAnchorsAsArray(n),d=ie(n),a=0;i&&a<i.length;a+=2)if(se(e,t,d,i[a],i[a+1]))return a/2;return-1}function ae(){P=t.panningEnabled(),C=t.zoomingEnabled(),w=t.boxSelectionEnabled(),t.zoomingEnabled(!1).panningEnabled(!1).boxSelectionEnabled(!1)}function re(){t.zoomingEnabled(C).panningEnabled(P).boxSelectionEnabled(w)}null==ee&&(ee={}),ee.options=n;var ce=i((function(e,t,n,o){var i=e.data(s.syntax[t].weight),d=e.data(s.syntax[t].distance),a=s.convertToRelativePosition(e,o);i[n]=a.weight,d[n]=a.distance,e.data(s.syntax[t].weight,i),e.data(s.syntax[t].distance,d)}),5);P=t.panningEnabled(),C=t.zoomingEnabled(),w=t.boxSelectionEnabled();var le,ge,he,ue,ye,ve,pe,fe,xe,me=(we=t.edges(":selected")).length;1===me&&(E=we[0]),t.bind("zoom pan",h=function(){E&&oe()}),t.on("data","edge",A=function(){E&&oe()}),t.on("style","edge.edgebendediting-hasbendpoints:selected, edge.edgecontrolediting-hascontrolpoints:selected",c=function(){setTimeout((function(){oe()}),50)}),t.on("remove","edge",l=function(){if(this.selected()){if(me-=1,t.startBatch(),E&&E.removeClass("cy-edge-editing-highlight"),1===me){var e=t.edges(":selected");1===e.length?(E=e[0]).addClass("cy-edge-editing-highlight"):E=void 0}else E=void 0;t.endBatch()}oe()}),t.on("add","edge",g=function(){this.selected()&&(me+=1,t.startBatch(),E&&E.removeClass("cy-edge-editing-highlight"),1===me?(E=this).addClass("cy-edge-editing-highlight"):E=void 0,t.endBatch()),oe()}),t.on("select","edge",u=function(){var e=this;0!=e.target().connectedEdges().length&&0!=e.source().connectedEdges().length&&(me+=1,t.startBatch(),E&&E.removeClass("cy-edge-editing-highlight"),1===me?(E=e).addClass("cy-edge-editing-highlight"):E=void 0,t.endBatch(),oe())}),t.on("unselect","edge",y=function(){if(me-=1,t.startBatch(),E&&E.removeClass("cy-edge-editing-highlight"),1===me){var e=t.edges(":selected");1===e.length?(E=e[0]).addClass("cy-edge-editing-highlight"):E=void 0}else E=void 0;t.endBatch(),oe()});var be,Ae,Pe,Ce,we,Te=!1;t.on("tapstart",v=function(e){ge=e.position||e.cyPosition}),t.on("tapstart","edge",p=function(e){var n=this;if(E&&E.id()===n.id()){he=n;var o=s.getEdgeType(n);"none"===o&&(o="bend");var i=function(e,t,n){var o=ie(n),i=n._private.rscratch.allpts,s={x:i[0],y:i[1]},d={x:i[i.length-2],y:i[i.length-1]};return ne(s),ne(d),se(e,t,o,s.x,s.y)?0:se(e,t,o,d.x,d.y)?1:-1}(ge.x,ge.y,n);if(0==i||1==i){n.unselect(),ve=i,fe=0==i?he.source():he.target();var a=0==i?"source":"target",r=d.disconnectEdge(he,t,e.renderedPosition,a);pe=r.dummyNode,he=r.edge,ae()}else le=void 0,ye=!0}else ye=!1}),t.on("drag","node",b=function(){E&&oe()}),t.on("tapdrag",f=function(e){t.edges(":selected").length>0&&t.autounselectify(!1);var o=he;if(void 0===he||!s.isIgnoredEdge(o)){var i=s.getEdgeType(o);if(ye&&n.enableCreateAnchorOnDrag&&!W&&"none"!==i){var d=s.syntax[i].weight,a=s.syntax[i].distance;ue={edge:o,type:i,weights:o.data(d)?[].concat(o.data(d)):[],distances:o.data(a)?[].concat(o.data(a)):[]},o.unselect(),le=s.addAnchorPoint(o,ge),he=o,ye=void 0,Te=!0,ae()}if(W||void 0!==he&&(void 0!==le||void 0!==ve)){var r=e.position||e.cyPosition;-1!=ve&&pe?pe.position(r):null!=le?ce(o,i,le,r):W&&(void 0===U.touchedAnchorIndex&&ge&&(U.touchedAnchorIndex=de(ge.x,ge.y,U.edge)),void 0!==U.touchedAnchorIndex&&ce(U.edge,U.edgeType,U.touchedAnchorIndex,r)),e.target&&e.target[0]&&e.target.isNode()&&(xe=e.target)}}}),t.on("tapend",x=function(e){M&&N.getStage().fire("contentMouseup");var n=he||U.edge;if(void 0!==n){var o=U.touchedAnchorIndex;if(null!=o){var i,a=n.source().position("x"),r=n.source().position("y"),c=n.target().position("x"),l=n.target().position("y"),g=s.getAnchorsAsArray(n),h=[a,r].concat(g).concat([c,l]),u=o+1,y=u-1,v=u+1,p={x:h[2*u],y:h[2*u+1]},f={x:h[2*y],y:h[2*y+1]},x={x:h[2*v],y:h[2*v+1]};if(p.x===f.x&&p.y===f.y||p.x===f.x&&p.y===f.y)i=!0;else{var m,b=(f.y-x.y)/(f.x-x.x),A={srcPoint:f,tgtPoint:x,m1:b,m2:-1/b},P=s.getIntersection(n,p,A),C=Math.sqrt(Math.pow(p.x-P.x,2)+Math.pow(p.y-P.y,2));"bend"===(m=s.getEdgeType(n))&&C<te().bendRemovalSensitivity&&(i=!0)}i&&s.removeAnchor(n,o)}else if(null!=pe&&(0==ve||1==ve)){var w=fe,T="valid",E=0==ve?"source":"target";if(xe){var S=0==ve?xe:n.source(),I=1==ve?xe:n.target();"function"==typeof V&&(T=V(n,S,I)),w="valid"===T?xe:fe}if(S=0==ve?w:n.source(),I=1==ve?w:n.target(),n=d.connectEdge(n,fe,E),fe.id()!==w.id())if("function"==typeof H){var D=H(S.id(),I.id(),n.data());if(D&&(d.copyEdge(n,D),s.initAnchorPoints(te().bendPositionsFunction,te().controlPositionsFunction,[D])),D&&te().undoable){var F={newEdge:D,oldEdge:n};t.undoRedo().do("removeReconnectedEdge",F),n=D}else D&&(t.remove(n),n=D)}else{var R=0==ve?{source:w.id()}:{target:w.id()},O=0==ve?{source:fe.id()}:{target:fe.id()};if(te().undoable&&w.id()!==fe.id()){var B={edge:n,location:R,oldLoc:O};n=t.undoRedo().do("reconnectEdge",B).edge}}"valid"!==T&&"function"==typeof X&&X(),n.select(),t.remove(pe)}}"none"===(m=s.getEdgeType(n))&&(m="bend"),void 0!==U.touchedAnchorIndex||Te||(ue=void 0);var K=s.syntax[m].weight;void 0!==n&&void 0!==ue&&(n.data(K)?n.data(K).toString():null)!=ue.weights.toString()&&(Te&&(n.select(),t.autounselectify(!0)),te().undoable&&t.undoRedo().do("changeAnchorPoints",ue)),le=void 0,he=void 0,ue=void 0,ye=void 0,ve=void 0,pe=void 0,fe=void 0,xe=void 0,ge=void 0,Te=!1,U.touchedAnchorIndex=void 0,re(),setTimeout((function(){oe()}),50)}),t.on("edgeediting.movestart",(function(e,t){Ce=!1,null!=t[0]&&t.forEach((function(e){null==s.getAnchorsAsArray(e)||Ce||(Ae={x:s.getAnchorsAsArray(e)[0],y:s.getAnchorsAsArray(e)[1]},be={firstTime:!0,firstAnchorPosition:{x:Ae.x,y:Ae.y},edges:t},Pe=e,Ce=!0)}))})),t.on("edgeediting.moveend",(function(e,n){if(null!=be){var o=be.firstAnchorPosition,i={x:s.getAnchorsAsArray(Pe)[0],y:s.getAnchorsAsArray(Pe)[1]};be.positionDiff={x:-i.x+o.x,y:-i.y+o.y},delete be.firstAnchorPosition,te().undoable&&t.undoRedo().do("moveAnchorPoints",be),be=void 0}})),t.on("cxttap",m=function(e){var o,i,d=e.target||e.cyTarget,a=!1;try{a=d.isEdge()}catch(e){}a?(o=d,i=s.getEdgeType(o)):(o=U.edge,i=U.edgeType);var r=t.contextMenus("get");if(!E||E.id()!=o.id()||s.isIgnoredEdge(o)||E!==o)return r.hideMenuItem(I),r.hideMenuItem(S),r.hideMenuItem(R),void r.hideMenuItem(F);var c=e.position||e.cyPosition,l=de(c.x,c.y,o);-1==l?(r.hideMenuItem(I),r.hideMenuItem(R),"control"===i&&a?(r.showMenuItem(F),r.hideMenuItem(S)):"bend"===i&&a?(r.showMenuItem(S),r.hideMenuItem(F)):a?(r.showMenuItem(S),r.showMenuItem(F)):(r.hideMenuItem(S),r.hideMenuItem(F)),s.currentCtxPos=c):(r.hideMenuItem(S),r.hideMenuItem(F),"control"===i?(r.showMenuItem(R),r.hideMenuItem(I),n.enableMultipleAnchorRemovalOption&&o.hasClass("edgecontrolediting-hasmultiplecontrolpoints")&&r.showMenuItem(O)):"bend"===i?(r.showMenuItem(I),r.hideMenuItem(R)):(r.hideMenuItem(I),r.hideMenuItem(R),r.hideMenuItem(O)),s.currentAnchorIndex=l),s.currentCtxEdge=o}),t.on("cyedgeediting.changeAnchorPoints","edge",(function(){t.startBatch(),t.edges().unselect(),t.trigger("bendPointMovement"),t.endBatch(),oe()}));var Ee=!1,Me={37:!1,38:!1,39:!1,40:!1};document.addEventListener("keydown",(function(n){if("function"==typeof te().moveSelectedAnchorsOnKeyEvents?te().moveSelectedAnchorsOnKeyEvents():te().moveSelectedAnchorsOnKeyEvents){var o,i,d=document.activeElement.tagName;if("TEXTAREA"!=d&&"INPUT"!=d){switch(n.keyCode){case 37:case 39:case 38:case 40:case 32:n.preventDefault()}if(n.keyCode<"37"||n.keyCode>"40")return;if(Me[n.keyCode]=!0,t.edges(":selected").length!=t.elements(":selected").length||1!=t.edges(":selected").length)return;Ee||(we=t.edges(":selected"),t.trigger("edgeediting.movestart",[we]),Ee=!0);var a=3;if(n.altKey&&n.shiftKey)return;n.altKey?a=1:n.shiftKey&&(a=10);var r=0,c=0;r+=Me[39]?a:0,r-=Me[37]?a:0,c+=Me[40]?a:0,c-=Me[38]?a:0,o={x:r,y:c},(i=we).forEach((function(t){var n=s.getAnchorsAsArray(t),i=[];if(null!=n){for(var d=0;d<n.length;d+=2)i.push({x:n[d]+o.x,y:n[d+1]+o.y});var a=s.getEdgeType(t);if(s.edgeTypeNoneShouldntHappen(a,"UiUtilities.js, moveAnchorPoints"))return;"bend"===a?e.bendPointPositionsSetterFunction(t,i):"control"===a&&e.controlPointPositionsSetterFunction(t,i)}})),s.initAnchorPoints(te().bendPositionsFunction,te().controlPositionsFunction,i),t.trigger("bendPointMovement")}}}),!0),document.addEventListener("keyup",(function(e){e.keyCode<"37"||e.keyCode>"40"||(e.preventDefault(),Me[e.keyCode]=!1,("function"==typeof te().moveSelectedAnchorsOnKeyEvents?te().moveSelectedAnchorsOnKeyEvents():te().moveSelectedAnchorsOnKeyEvents)&&(t.trigger("edgeediting.moveend",[we]),we=void 0,Ee=!1))}),!0),o.data("cyedgeediting",ee)},unbind:function(){t.off("remove","node",l).off("add","node",g).off("style","edge.edgebendediting-hasbendpoints:selected, edge.edgecontrolediting-hascontrolpoints:selected",c).off("select","edge",u).off("unselect","edge",y).off("tapstart",v).off("tapstart","edge",p).off("tapdrag",f).off("tapend",x).off("cxttap",m).off("drag","node",b).off("data","edge",A),t.unbind("zoom pan",h)}};return k[n]?k[n].apply($(t.container()),Array.prototype.slice.call(arguments,1)):"object"!=(void 0===n?"undefined":o(n))&&n?($.error("No such function  for cytoscape.js-edge-editing"),$(this)):k.init.apply($(t.container()),arguments)}},259:e=>{var t={options:void 0,currentCtxEdge:void 0,currentCtxPos:void 0,currentAnchorIndex:void 0,ignoredClasses:void 0,setIgnoredClasses:function(e){this.ignoredClasses=e},syntax:{bend:{edge:"segments",class:"edgebendediting-hasbendpoints",multiClass:"edgebendediting-hasmultiplebendpoints",weight:"cyedgebendeditingWeights",distance:"cyedgebendeditingDistances",weightCss:"segment-weights",distanceCss:"segment-distances"},control:{edge:"unbundled-bezier",class:"edgecontrolediting-hascontrolpoints",multiClass:"edgecontrolediting-hasmultiplecontrolpoints",weight:"cyedgecontroleditingWeights",distance:"cyedgecontroleditingDistances",weightCss:"control-point-weights",distanceCss:"control-point-distances"}},getEdgeType:function(e){return e?e.hasClass(this.syntax.bend.class)?"bend":e.hasClass(this.syntax.control.class)?"control":e.css("curve-style")===this.syntax.bend.edge?"bend":e.css("curve-style")===this.syntax.control.edge?"control":this.options.bendPositionsFunction(e)&&this.options.bendPositionsFunction(e).length>0?"bend":this.options.controlPositionsFunction(e)&&this.options.controlPositionsFunction(e).length>0?"control":"none":"none"},initAnchorPoints:function(e,t,n){for(var o=0;o<n.length;o++){var i=n[o],s=this.getEdgeType(i);if("none"!==s&&!this.isIgnoredEdge(i)){var d;"bend"===s?d=e.apply(this,i):"control"===s&&(d=t.apply(this,i));var a={weights:[],distances:[]};if(d)a=this.convertToRelativePositions(i,d);else{var r=i.data(this.syntax[s].weight),c=i.data(this.syntax[s].distance);r&&c&&(a={weights:r,distances:c})}a.distances.length>0?(i.data(this.syntax[s].weight,a.weights),i.data(this.syntax[s].distance,a.distances),i.addClass(this.syntax[s].class),a.distances.length>1&&i.addClass(this.syntax[s].multiClass)):(i.data(this.syntax[s].weight,[]),i.data(this.syntax[s].distance,[]),i.hasClass(this.syntax[s].class)&&i.removeClass(this.syntax[s].class),i.hasClass(this.syntax[s].multiClass)&&i.removeClass(this.syntax[s].multiClass))}}},isIgnoredEdge:function(e){var t=e.source().position("x"),n=e.source().position("y"),o=e.target().position("x"),i=e.target().position("y");if(t==o&&n==i||e.source().id()==e.target().id())return!0;for(var s=0;this.ignoredClasses&&s<this.ignoredClasses.length;s++)if(e.hasClass(this.ignoredClasses[s]))return!0;return!1},getLineDirection:function(e,t){return e.y==t.y&&e.x<t.x?1:e.y<t.y&&e.x<t.x?2:e.y<t.y&&e.x==t.x?3:e.y<t.y&&e.x>t.x?4:e.y==t.y&&e.x>t.x?5:e.y>t.y&&e.x>t.x?6:e.y>t.y&&e.x==t.x?7:8},getSrcTgtPointsAndTangents:function(e){var t=e.source(),n=e.target(),o=(n.position(),t.position(),t.position()),i=n.position(),s=(i.y-o.y)/(i.x-o.x);return{m1:s,m2:-1/s,srcPoint:o,tgtPoint:i}},getIntersection:function(e,t,n){void 0===n&&(n=this.getSrcTgtPointsAndTangents(e));var o,i,s=n.srcPoint,d=(n.tgtPoint,n.m1),a=n.m2;if(d==1/0||d==-1/0)o=s.x,i=t.y;else if(0==d)o=t.x,i=s.y;else{var r=s.y-d*s.x;i=d*(o=(t.y-a*t.x-r)/(d-a))+r}return{x:o,y:i}},getAnchorsAsArray:function(e){var t=this.getEdgeType(e);if("none"!==t&&e.css("curve-style")===this.syntax[t].edge){for(var n=[],o=e.pstyle(this.syntax[t].weightCss)?e.pstyle(this.syntax[t].weightCss).pfValue:[],i=e.pstyle(this.syntax[t].distanceCss)?e.pstyle(this.syntax[t].distanceCss).pfValue:[],s=Math.min(o.length,i.length),d=e.source().position(),a=e.target().position(),r=a.y-d.y,c=a.x-d.x,l=Math.sqrt(c*c+r*r),g={x:c/l,y:r/l},h=-g.y,u=g.x,y=0;y<s;y++){var v=o[y],p=i[y],f=1-v,x=v,m={x1:d.x,x2:a.x,y1:d.y,y2:a.y},b={x:m.x1*f+m.x2*x,y:m.y1*f+m.y2*x};n.push(b.x+h*p,b.y+u*p)}return n}},convertToRelativePosition:function(e,t,n){void 0===n&&(n=this.getSrcTgtPointsAndTangents(e));var o,i=this.getIntersection(e,t,n),s=i.x,d=i.y,a=n.srcPoint,r=n.tgtPoint;o=s!=a.x?(s-a.x)/(r.x-a.x):d!=a.y?(d-a.y)/(r.y-a.y):0;var c=Math.sqrt(Math.pow(d-t.y,2)+Math.pow(s-t.x,2)),l=this.getLineDirection(a,r),g=this.getLineDirection(i,t);return l-g!=-2&&l-g!=6&&0!=c&&(c*=-1),{weight:o,distance:c}},convertToRelativePositions:function(e,t){for(var n=this.getSrcTgtPointsAndTangents(e),o=[],i=[],s=0;t&&s<t.length;s++){var d=t[s],a=this.convertToRelativePosition(e,d,n);o.push(a.weight),i.push(a.distance)}return{weights:o,distances:i}},getDistancesString:function(e,t){for(var n="",o=e.data(this.syntax[t].distance),i=0;o&&i<o.length;i++)n=n+" "+o[i];return n},getWeightsString:function(e,t){for(var n="",o=e.data(this.syntax[t].weight),i=0;o&&i<o.length;i++)n=n+" "+o[i];return n},addAnchorPoint:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;void 0!==e&&void 0!==t||(e=this.currentCtxEdge,t=this.currentCtxPos),void 0===n&&(n=this.getEdgeType(e));for(var o,i=this.syntax[n].weight,s=this.syntax[n].distance,d=this.convertToRelativePosition(e,t),a=d.weight,r=e.source().position("x"),c=e.source().position("y"),l=e.target().position("x"),g=e.target().position("y"),h=this.convertToRelativePosition(e,{x:r,y:c}).weight,u=this.convertToRelativePosition(e,{x:l,y:g}).weight,y=[h].concat(e.data(i)?e.data(i):[]).concat([u]),v=this.getAnchorsAsArray(e),p=1/0,f=[r,c].concat(v||[]).concat([l,g]),x=-1,m=0;m<y.length-1;m++){var b=y[m],A=y[m+1],P=this.compareWithPrecision(a,b,!0),C=this.compareWithPrecision(a,A),w=this.compareWithPrecision(a,A,!0),T=this.compareWithPrecision(a,b);if(P&&C||w&&T){var E={x:r=f[2*m],y:c=f[2*m+1]},M={x:l=f[2*m+2],y:g=f[2*m+3]},S=(c-g)/(r-l),I=-1/S,D={srcPoint:E,tgtPoint:M,m1:S,m2:I},F=this.getIntersection(e,t,D),R=Math.sqrt(Math.pow(t.x-F.x,2)+Math.pow(t.y-F.y,2));R<p&&(p=R,o=F,x=m)}}void 0!==o&&(t=o),d=this.convertToRelativePosition(e,t),void 0===o&&(d.distance=0);var O=e.data(i),B=e.data(s);return B=B||[],0===(O=O||[]).length&&(x=0),-1!=x&&(O.splice(x,0,d.weight),B.splice(x,0,d.distance)),e.data(i,O),e.data(s,B),e.addClass(this.syntax[n].class),(O.length>1||B.length>1)&&e.addClass(this.syntax[n].multiClass),x},removeAnchor:function(e,t){void 0!==e&&void 0!==t||(e=this.currentCtxEdge,t=this.currentAnchorIndex);var n=this.getEdgeType(e);if(!this.edgeTypeNoneShouldntHappen(n,"anchorPointUtilities.js, removeAnchor")){var o,i=this.syntax[n].weight,s=this.syntax[n].distance,d=e.data(i),a=e.data(s);"bend"===n?o=this.options.bendPositionsFunction(e):"control"===n&&(o=this.options.controlPositionsFunction(e)),d.splice(t,1),a.splice(t,1),o&&o.splice(t,1),1==d.length||1==a.length?e.removeClass(this.syntax[n].multiClass):0==d.length||0==a.length?(e.removeClass(this.syntax[n].class),e.data(i,[]),e.data(s,[])):(e.data(i,d),e.data(s,a))}},removeAllAnchors:function(e){void 0===e&&(e=this.currentCtxEdge);var t=this.getEdgeType(e);if(!this.edgeTypeNoneShouldntHappen(t,"anchorPointUtilities.js, removeAllAnchors")){e.removeClass(this.syntax[t].class),e.removeClass(this.syntax[t].multiClass);var n=this.syntax[t].weight,o=this.syntax[t].distance;e.data(n,[]),e.data(o,[]),"bend"===t&&this.options.bendPositionsFunction(e)?this.options.bendPointPositionsSetterFunction(e,[]):"control"===t&&this.options.controlPositionsFunction(e)&&this.options.controlPointPositionsSetterFunction(e,[])}},calculateDistance:function(e,t){var n=e.x-t.x,o=e.y-t.y;return Math.sqrt(Math.pow(n,2)+Math.pow(o,2))},compareWithPrecision:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.01,i=e-t;return Math.abs(i)<=o||(n?e<t:e>t)},edgeTypeNoneShouldntHappen:function(e,t){return"none"===e&&(console.log("In "+t+": edge type none should never happen here!!"),!0)}};e.exports=t},218:e=>{var t,n,o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=(t=Math.max,n=Date.now||function(){return(new Date).getTime()},function(e,i,s){var d,a,r,c,l,g,h,u,y,v=0,p=!1,f=!0;if("function"!=typeof e)throw new TypeError("Expected a function");if(i=i<0?0:+i||0,!0===s){var x=!0;f=!1}else y=void 0===(u=s)?"undefined":o(u),!u||"object"!=y&&"function"!=y||(x=!!s.leading,p="maxWait"in s&&t(+s.maxWait||0,i),f="trailing"in s?!!s.trailing:f);function m(t,o){o&&clearTimeout(o),a=g=h=void 0,t&&(v=n(),r=e.apply(l,d),g||a||(d=l=void 0))}function b(){var e=i-(n()-c);e<=0||e>i?m(h,a):g=setTimeout(b,e)}function A(){m(f,g)}function P(){if(d=arguments,c=n(),l=this,h=f&&(g||!x),!1===p)var t=x&&!g;else{a||x||(v=c);var o=p-(c-v),s=o<=0||o>p;s?(a&&(a=clearTimeout(a)),v=c,r=e.apply(l,d)):a||(a=setTimeout(A,o))}return s&&g?g=clearTimeout(g):g||i===p||(g=setTimeout(b,i)),t&&(s=!0,r=e.apply(l,d)),!s||g||a||(d=l=void 0),r}return P.cancel=function(){g&&clearTimeout(g),a&&clearTimeout(a),v=0,a=g=h=void 0},P});e.exports=i},579:(e,t,n)=>{var o,i,s;i=n(259),n(218),s=function(e,t,o){var s=n(347);if(e&&t&&o){var d,a={bendPositionsFunction:function(e){return e.data("bendPointPositions")},controlPositionsFunction:function(e){return e.data("controlPointPositions")},bendPointPositionsSetterFunction:function(e,t){e.data("bendPointPositions",t)},controlPointPositionsSetterFunction:function(e,t){e.data("controlPointPositions",t)},initAnchorsAutomatically:!0,ignoredClasses:[],undoable:!1,anchorShapeSizeFactor:3,zIndex:999,bendRemovalSensitivity:8,addBendMenuItemTitle:"Add Bend Point",removeBendMenuItemTitle:"Remove Bend Point",removeAllBendMenuItemTitle:"Remove All Bend Points",addControlMenuItemTitle:"Add Control Point",removeControlMenuItemTitle:"Remove Control Point",removeAllControlMenuItemTitle:"Remove All Control Points",moveSelectedAnchorsOnKeyEvents:function(){return!0},enableMultipleAnchorRemovalOption:!1,useTrailingDividersAfterContextMenuOptions:!1,enableCreateAnchorOnDrag:!0},r=!1;e("core","edgeEditing",(function(e){var t=this;return"initialized"===e?r:("get"!==e&&(d=function(e,t){var n={};for(var o in e)n[o]=e[o];for(var o in t)if("bendRemovalSensitivity"==o){var i=t[o];isNaN(i)||(n[o]=i>=0&&i<=20?t[o]:i<0?0:20)}else n[o]=t[o];return n}(a,e),r=!0,t.style().selector(".edgebendediting-hasbendpoints").css({"curve-style":"segments","segment-distances":function(e){return i.getDistancesString(e,"bend")},"segment-weights":function(e){return i.getWeightsString(e,"bend")},"edge-distances":"node-position"}),t.style().selector(".edgecontrolediting-hascontrolpoints").css({"curve-style":"unbundled-bezier","control-point-distances":function(e){return i.getDistancesString(e,"control")},"control-point-weights":function(e){return i.getWeightsString(e,"control")},"edge-distances":"node-position"}),t.style().selector("#nwt_reconnectEdge_dummy").css({width:"1",height:"1",visibility:"hidden"}),i.setIgnoredClasses(d.ignoredClasses),d.initAnchorsAutomatically&&i.initAnchorPoints(d.bendPositionsFunction,d.controlPositionsFunction,t.edges(),d.ignoredClasses),s(d,t)),r?{getAnchorsAsArray:function(e){return i.getAnchorsAsArray(e)},initAnchorPoints:function(e){i.initAnchorPoints(d.bendPositionsFunction,d.controlPositionsFunction,e)},deleteSelectedAnchor:function(e,t){i.removeAnchor(e,t)},getEdgeType:function(e){return i.getEdgeType(e)}}:void 0)}))}},e.exports&&(e.exports=s),void 0===(o=function(){return s}.call(t,n,t,e))||(e.exports=o),"undefined"!=typeof cytoscape&&$&&Konva&&s(cytoscape,$,Konva)},171:e=>{e.exports={disconnectEdge:function(e,t,n,o){var i={data:{id:"nwt_reconnectEdge_dummy",ports:[]},renderedPosition:n};t.add(i);var s="source"===o?{source:i.data.id}:{target:i.data.id};return e=e.move(s)[0],{dummyNode:t.nodes("#"+i.data.id)[0],edge:e}},connectEdge:function(e,t,n){if(e.isEdge()&&t.isNode()){var o={};if("source"===n)o.source=t.id();else{if("target"!==n)return;o.target=t.id()}return e.move(o)[0]}},copyEdge:function(e,t){this.copyAnchors(e,t),this.copyStyle(e,t)},copyStyle:function(e,t){e&&t&&(t.data("line-color",e.data("line-color")),t.data("width",e.data("width")),t.data("cardinality",e.data("cardinality")))},copyAnchors:function(e,t){if(e.hasClass("edgebendediting-hasbendpoints")){var n=e.data("cyedgebendeditingDistances"),o=e.data("cyedgebendeditingWeights");t.data("cyedgebendeditingDistances",n),t.data("cyedgebendeditingWeights",o),t.addClass("edgebendediting-hasbendpoints")}else e.hasClass("edgecontrolediting-hascontrolpoints")&&(n=e.data("cyedgecontroleditingDistances"),o=e.data("cyedgecontroleditingWeights"),t.data("cyedgecontroleditingDistances",n),t.data("cyedgecontroleditingWeights",o),t.addClass("edgecontrolediting-hascontrolpoints"));e.hasClass("edgebendediting-hasmultiplebendpoints")?t.addClass("edgebendediting-hasmultiplebendpoints"):e.hasClass("edgecontrolediting-hasmultiplecontrolpoints")&&t.addClass("edgecontrolediting-hasmultiplecontrolpoints")}}},961:e=>{e.exports=function(e,t,n){if(null!=e.undoRedo){var o=e.undoRedo({defaultActions:!1,isDebug:!0});o.action("changeAnchorPoints",i,i),o.action("moveAnchorPoints",s,s),o.action("reconnectEdge",d,d),o.action("removeReconnectedEdge",a,a)}function i(n){var o,i,s,d,a=e.getElementById(n.edge.id()),r="none"!==n.type?n.type:t.getEdgeType(a);"none"!==n.type||n.set?(s=t.syntax[r].weight,d=t.syntax[r].distance,o=n.set?a.data(s):n.weights,i=n.set?a.data(d):n.distances):(o=[],i=[]);var c={edge:a,type:r,weights:o,distances:i,set:!0};if(n.set){var l=n.weights&&n.weights.length>0,g=l&&n.weights.length>1;l&&(a.data(s,n.weights),a.data(d,n.distances));var h=t.syntax[r].class,u=t.syntax[r].multiClass;l||g?l&&!g?(a.addClass(h),a.removeClass(u)):a.addClass(h+" "+u):a.removeClass(h+" "+u),l||(a.data(s,[]),a.data(d,[])),a.selected()?(a.unselect(),a.select()):a.select()}return a.trigger("cyedgeediting.changeAnchorPoints"),c}function s(e){if(e.firstTime)return delete e.firstTime,e;var o=e.edges,i=e.positionDiff,s={edges:o,positionDiff:{x:-i.x,y:-i.y}};return function(e,o){o.forEach((function(o){var i=t.getEdgeType(o),s=t.getAnchorsAsArray(o),d=[];if(null!=s){for(var a=0;a<s.length;a+=2)d.push({x:s[a]+e.x,y:s[a+1]+e.y});"bend"===i?n.bendPointPositionsSetterFunction(o,d):"control"===i&&n.controlPointPositionsSetterFunction(o,d)}})),t.initAnchorPoints(n.bendPositionsFunction,n.controlPositionsFunction,o)}(i,o),s}function d(e){var t=e.edge,n=e.location,o=e.oldLoc,i={edge:t=t.move(n)[0],location:o,oldLoc:n};return t.unselect(),i}function a(t){var n=t.oldEdge;(o=e.getElementById(n.data("id")))&&o.length>0&&(n=o);var o,i=t.newEdge;return(o=e.getElementById(i.data("id")))&&o.length>0&&(i=o),n.inside()&&(n=n.remove()[0]),i.removed()&&(i=i.restore()).unselect(),{oldEdge:i,newEdge:n}}}}},t={};return function n(o){var i=t[o];if(void 0!==i)return i.exports;var s=t[o]={exports:{}};return e[o](s,s.exports,n),s.exports}(579)})()}));

    var edgeBConfig = {
  // this function specifies the positions of bend points
  // strictly name the property 'bendPointPositions' for the edge to be detected for bend point edititng
  bendPositionsFunction: function(ele) {
    return ele.data('bendPoints')
  },
  // this function specifies the poitions of control points
  // strictly name the property 'controlPointPositions' for the edge to be detected for control point edititng
  controlPositionsFunction: function(ele) {
    return ele.data('controlPoints')
  },
  // whether to initilize bend and control points on creation of this extension automatically
  initAnchorsAutomatically: true,
  // the classes of those edges that should be ignored
  ignoredClasses: [],
  // whether the bend editing operations are undoable (requires cytoscape-undo-redo.js)
  undoable: false,
  // the size of bend and control point shape is obtained by multipling width of edge with this parameter
  anchorShapeSizeFactor: 2,
  // z-index value of the canvas in which bend points are drawn
  zIndex: -1, // Must bu 9 at least
  // whether to start the plugin in the enabled state
  enabled: true,
  enableCreateAnchorOnDrag: false,
  handleReconnectEdge: false,
  handleAnchors: false,
}
const arrowPosition = {"target":"target","both":"both","none":"none"};
const labelField ="";const backgroundColorField ="";const xField = undefined;
      let cytoConfig = {
        style: [
          {
            selector: 'core',
            style: { 'selection-box-color': 'yellow' }
          },
          {
            selector: '*', //
            style: {
              'font-size': 14,
              'font-family': 'system-ui'
            }
          },

          {
            selector:
              'node[type="term"], node[type="group"], node[type="label"], node[type="property"]',
            style: {
              'background-color': function (e) {
                return calcTermColor(e)
               
              },
              'background-opacity': function (e) {
                return e.data('style.backgroundColor') ===
                  'transparent'
                  ? 0
                  : 1
              },



              'font-size': 'data(style.fontSize)',
              'font-family': 'data(style.fontType)',
              content: 'data(name)',
              shape: 'data(style.shape)',
              'text-valign': 'center',
              'text-wrap': 'wrap',
              'text-max-width': 'data(style.width)',
              color: function(e) {
                  if (e.data('style').fontColor !== 'auto') { return e.data('style').fontColor } else { return getContrastYIQ(calcTermColor(e)) }
              },
              'border-width': 2,
              'border-color': function (e) {
                return e.data('style.borderColor') !== 'transparent'
                  ? e.data('style.borderColor')
                  : '#ffffff'
              },
              'border-opacity': function (e) {
                return e.data('style.borderColor') === 'transparent'
                  ? 0
                  : 1
              },



              width: 'data(style.width)',
              height: 'data(style.height)',
              'min-zoomed-font-size': 4,
              'border-style': 'data(style.lineStyle)'
            }
          },
          {
            selector: 'node[type="term"]',
            style: {
              content: e => {
                const name = e.data('name')
                const labelName = e.data('xFields')[labelField] ? " [" + e.data('xFields')[labelField] + "]" : ''
                return (
                  name + labelName
                )
              }
            }
          },
          {
            selector: 'node[displayType="image"]',
            style: {
              'background-image': 'data(style.imageUrl)',
              'background-fit': 'contain',
              'background-image-containment': 'inside',
              'text-max-width': 150,
              'text-valign': 'top',
              color: function(e) {
                if (e.data('style').fontColor !== 'auto') { return e.data('style').fontColor } else { return '#000000' }
              }
            }
          },
          {
            selector: 'node.eh-handle',
            style: {
              shape: 'roundrectangle',
              'border-width': 0,
              color: '#999999',

              'background-color': '#ffffff',
              'background-fit': 'contain',
              width: 20,
              height: 20,
              'z-index': 99999
            }
          },
          {
            selector: 'node[type="conpoint"]',
            style: {
              content: 'data(name)',
              shape: 'octagon',
              'text-valign': 'center',
              'border-width': 1,
              'font-weight': 600,
              'font-size': 12,
              color: e =>
                e.data('name') == 'AND' ? '#FFFFFF' : '#999999',
              'background-color': e =>
                e.data('name') == 'AND' ? '#999999' : '#FFFFFF',
              'border-color': '#999999',
              width: 30,
              height: 30
            }
          },
          {
            selector: 'node[type="property"]',
            style: {
              shape: 'rectangle',
              'text-max-width': 250,
              'border-width': 1,
              'border-color': 'data(style.borderColor)',
              'border-style': 'solid',
              padding: '5px',
              width: 150,
              height: 10
            }
          },
          {
            selector: 'node[type="title1"]',
            style: {
              'background-color': '#ffffff',
              'background-opacity': '0',
              'font-size': 30,
              label: 'data(name)',
              shape: 'rectangle',
              color: 'data(style.borderColor)',
              'text-valign': 'center',
              'text-wrap': 'none',
              'text-max-width': 250,
              'border-width': 0,
              'border-color': '#aaf0f0',
              'border-style': 'solid',
              padding: '5px',
              width: 150,
              height: 10
            }
          },
          {
            selector: 'node[type="title2"]',
            style: {
              'background-color': '#ffffff',
              'background-opacity': '0',
              'font-size': 20,
              label: 'data(name)',
              shape: 'rectangle',
              color: 'data(style.borderColor)',
              'text-valign': 'center',
              'text-wrap': 'none',
              'text-max-width': 250,
              'border-width': 0,
              'border-color': '#aaf0f0',
              'border-style': 'solid',
              padding: '5px',
              width: 150,
              height: 10
            }
          },
          {
            selector: 'node[type="label"]',
            style: {
              shape: 'rectangle',
              'text-valign': 'center',
              'text-wrap': 'wrap',
              width: 'label',
              height: 'label',
              'text-max-width': 250,
              'border-width': 0,
              'border-style': 'solid',
              'border-color': 'data(style.backgroundColor)',
              padding: '5px',

              'z-index': 2
            }
          },
          {
            selector: 'node[type="group"]',
            style: {
              'background-color': 'data(style.backgroundColor)',
              'background-opacity': 0.3,
              content: 'data(name)',
              shape: 'rectangle',
              'text-valign': 'top',
              'text-halign': 'center',
              'text-wrap': 'wrap',
              'text-max-width': 150,

              color: function(e) {
                return getContrastYIQ(e.data('style').backgroundColor)
              },
              'text-background-color': 'data(style.backgroundColor)',
              'text-background-opacity': 1,
              'text-background-padding': '5px',
              'border-width': 2,
              'border-color': 'data(style.borderColor)',
              'border-style': 'data(style.lineStyle)',
              padding: '10px'
            }
          },
          {
            selector: '*[?hidden]',
            style: { display: 'none' }
          },
          {
            selector: 'node[?unexpanded]',
            style: { 'overlay-color': 'blue', 'overlay-opacity': 0.2 }
          },
          {
            selector: 'edge',
            style: {
              'target-arrow-shape': 'triangle',
              'curve-style': 'bezier'
            }
          },
          {
            selector: 'edge[drawType="loop"]',
            style: {
              'loop-direction': '180deg',
              'loop-sweep': '40deg',
              'target-endpoint': '200deg',
              'source-endpoint': '160deg',
              'control-point-step-size': 70
            }
          },
          {
            selector: 'edge[drawType="loopT"]',
            style: {
              'loop-direction': '0deg',
              'loop-sweep': '40deg',
              'target-endpoint': '20deg',
              'source-endpoint': '-20deg',
              'control-point-step-size': 70
            }
          },
          {
            selector: 'edge[drawType="loopL"]',
            style: {
              'loop-direction': '-90deg',
              'loop-sweep': '40deg',
              'target-endpoint': '-80deg',
              'source-endpoint': '-100deg',
              'control-point-step-size': 90
            }
          },
          {
            selector: 'edge[drawType="loopR"]',
            style: {
              'loop-direction': '90deg',
              'loop-sweep': '40deg',
              'target-endpoint': '100deg',
              'source-endpoint': '80deg',
              'control-point-step-size': 90
            }
          },
          {
            selector: 'edge[style]',
            style: {
              width: function(e) {
                return e.data('style') && e.data('style').lineWidth
                  ? e.data('style').lineWidth
                  : 2
              },
              color: function (e) {
                if (e.data('style').fontColor !== 'auto')
                  return e.data('style').fontColor
                else return e.data('style').lineColor
              },
              'font-size': 'data(style.fontSize)',
              'font-family': 'data(style.fontType)',
              'line-color': 'data(style.lineColor)',
              'target-arrow-color': 'data(style.lineColor)',
              'target-arrow-shape': function (e) {
                return e.data('style').arrowPosition ==
                  arrowPosition.target ||
                  e.data('style').arrowPosition == arrowPosition.both
                  ? 'triangle': 'none'
              },
              'source-arrow-color': 'data(style.lineColor)',
              'source-arrow-shape': function (e) {
                return e.data('style').arrowPosition ==
                  arrowPosition.both
                  ? 'triangle': 'none'
              },
              'curve-style': 'bezier',
              'text-rotation': 'autorotate',
              'text-margin-y': 0,
              'text-margin-x': 0,
              'text-background-color': '#ffffff',
              'text-background-opacity': 1,
              'min-zoomed-font-size': 10,
              label: function(e) {
                var cardinality = e.data('cardinality')
                  ? e.data('cardinality').name
                  : ''
                return (
                  (e.data('name') || '') +
                  ' ' +
                  (window.CARDINALITY === 'text' ? cardinality : '')
                )
              },
              'target-label': function(e) {
                var cardinality = e.data('cardinality')
                  ? e.data('cardinality').indicator
                  : ''
                return window.CARDINALITY === 'number'
                  ? cardinality
                  : ''
              },
              'target-text-offset': 20,
              'target-text-rotation': 'none',
              'text-wrap': 'wrap',
              'text-max-width': 150,
              'line-style': 'data(style.lineStyle)'
            }
          },
          {
            selector: 'node:locked',
            style: {
              'border-style': 'dotted'
            }
          },
          {
            selector: 'node:selected',
            style: {
              'overlay-color': '#ffff63',
              'overlay-padding': 6,
              'overlay-opacity': 0.5
            }
          },
          {
            selector: 'edge:selected',
            style: {
              'overlay-color': '#ffff63',
              'overlay-padding': 6,
              'overlay-opacity': 0.5
            }
          },
          {
            selector: 'node.eh-presumptive-target',
            style: {
              'border-width': 3,
              'border-color': '#ff0000',
              'border-style': 'dashed'
            }
          },
          {
            selector: 'node.hidden',
            style: {
              opacity: 0
            }
          },

          {
            selector: 'edge.hidden',
            style: {
              opacity: 0
            }
          }
        ]
      };
      function calcTermColor (e) {
        if (backgroundColorField !== undefined && backgroundColorField !== '') { // use xfield value for determining the bg color
          const labelName = e.data('xFields')[backgroundColorField]
          const color = xField?.colors[labelName]
          return color || '#FFFFFF'
        }
        return e.data('style.backgroundColor') !==
        'transparent'
        ? e.data('style.backgroundColor')
        : '#ffffff'
      }
      let cytoJSON = {"elements":{"nodes":[{"data":{"id":"Art","name":"Art","description":"Domaine regroupant diverses pratiques de création visant l'expression de l'esthétique ou de techniques.","additionalInformation":"","type":"term","displayType":"text","xFields":{},"parent":null,"weight":1,"style":{"borderColor":"#808080","backgroundColor":"#FFFFFF","fontColor":"auto","fontSize":"14","fontType":"sans-serif","shape":"round-rectangle","lineStyle":"solid","width":"120","height":"50","breakHyphen":false}},"position":{"x":1012.5,"y":437.5},"group":"nodes","removed":false},{"data":{"id":"Technique","name":"Technique","description":"Application de méthodes et de compétences spécifiques dans la production d'objets ou d'œuvres.","additionalInformation":"","type":"term","displayType":"text","xFields":{},"parent":null,"weight":1,"style":{"borderColor":"#808080","backgroundColor":"#FFFFFF","fontColor":"auto","fontSize":"14","fontType":"sans-serif","shape":"round-rectangle","lineStyle":"solid","width":"120","height":"50","breakHyphen":false}},"position":{"x":1237.5,"y":287.5},"group":"nodes","removed":false},{"data":{"id":"Imitation","name":"Imitation","description":"Méthode artistique où l'œuvre reproduit ou simule la réalité ou d'autres œuvres.","additionalInformation":"","type":"term","displayType":"text","xFields":{},"parent":null,"weight":1,"style":{"borderColor":"#808080","backgroundColor":"#FFFFFF","fontColor":"auto","fontSize":"14","fontType":"sans-serif","shape":"round-rectangle","lineStyle":"solid","width":"120","height":"50","breakHyphen":false}},"position":{"x":1262.5,"y":512.5},"group":"nodes","removed":false},{"data":{"id":"Expression esthétique","name":"Expression esthétique","description":"Représentation de la beauté ou de l'idéal artistique à travers des œuvres d'art.","additionalInformation":"","type":"term","displayType":"text","xFields":{},"parent":null,"weight":1,"style":{"borderColor":"#808080","backgroundColor":"#FFFFFF","fontColor":"auto","fontSize":"14","fontType":"sans-serif","shape":"round-rectangle","lineStyle":"solid","width":"120","height":"50","breakHyphen":false}},"position":{"x":812.5,"y":312.5},"group":"nodes","removed":false},{"data":{"id":"Artisanat","name":"Artisanat","description":"Création d'objets à la main impliquant un savoir-faire technique précis et souvent traditionnel.","additionalInformation":"","type":"term","displayType":"text","xFields":{},"parent":null,"weight":1,"style":{"borderColor":"#808080","backgroundColor":"#FFFFFF","fontColor":"auto","fontSize":"14","fontType":"sans-serif","shape":"round-rectangle","lineStyle":"solid","width":"120","height":"50","breakHyphen":false}},"position":{"x":1237.5,"y":-12.5},"group":"nodes","removed":false},{"data":{"id":"Platon","name":"Platon","description":"Philosophe grec ancien qui critiquait l'art pour son aspect imitatif, le considérant éloigné de la vérité.","additionalInformation":"","type":"term","displayType":"text","xFields":{},"parent":null,"weight":1,"style":{"borderColor":"#808080","backgroundColor":"#FFFFFF","fontColor":"auto","fontSize":"14","fontType":"sans-serif","shape":"round-rectangle","lineStyle":"solid","width":"120","height":"50","breakHyphen":false}},"position":{"x":1462.5,"y":387.5},"group":"nodes","removed":false},{"data":{"id":"Aristote","name":"Aristote","description":"Philosophe grec qui valorisait l'art comme une forme de connaissance et une imitation instructive.","additionalInformation":"","type":"term","displayType":"text","xFields":{},"parent":null,"weight":1,"style":{"borderColor":"#808080","backgroundColor":"#FFFFFF","fontColor":"auto","fontSize":"14","fontType":"sans-serif","shape":"round-rectangle","lineStyle":"solid","width":"120","height":"50","breakHyphen":false}},"position":{"x":1462.5,"y":612.5},"group":"nodes","removed":false},{"data":{"id":"Kant","name":"Kant","description":"Philosophe allemand qui a défini le beau comme ce qui plaît universellement sans concept.","additionalInformation":"","type":"term","displayType":"text","xFields":{},"parent":null,"weight":1,"style":{"borderColor":"#808080","backgroundColor":"#FFFFFF","fontColor":"auto","fontSize":"14","fontType":"sans-serif","shape":"round-rectangle","lineStyle":"solid","width":"120","height":"50","breakHyphen":false}},"position":{"x":562.5,"y":262.5},"group":"nodes","removed":false},{"data":{"id":"Hegel","name":"Hegel","description":"Philosophe allemand qui voyait l'art comme une manifestation sensible de l'idée et de la vérité.","additionalInformation":"","type":"term","displayType":"text","xFields":{},"parent":null,"weight":1,"style":{"borderColor":"#808080","backgroundColor":"#FFFFFF","fontColor":"auto","fontSize":"14","fontType":"sans-serif","shape":"round-rectangle","lineStyle":"solid","width":"120","height":"50","breakHyphen":false}},"position":{"x":637.5,"y":437.5},"group":"nodes","removed":false},{"data":{"id":"Nietzsche","name":"Nietzsche","description":"Philosophe allemand qui considérait l'art comme un stimulant vital, célébrant la vie et la résilience.","additionalInformation":"","type":"term","displayType":"text","xFields":{},"parent":null,"weight":1,"style":{"borderColor":"#808080","backgroundColor":"#FFFFFF","fontColor":"auto","fontSize":"14","fontType":"sans-serif","shape":"round-rectangle","lineStyle":"solid","width":"120","height":"50","breakHyphen":false}},"position":{"x":812.5,"y":62.5},"group":"nodes","removed":false},{"data":{"id":"Vérité","name":"Vérité","description":"Concept philosophique central souvent associé à la réalité objective, exactitude et fidélité.","additionalInformation":"","type":"term","displayType":"text","xFields":{},"parent":null,"weight":1,"style":{"borderColor":"#808080","backgroundColor":"#FFFFFF","fontColor":"auto","fontSize":"14","fontType":"sans-serif","shape":"round-rectangle","lineStyle":"solid","width":"120","height":"50","breakHyphen":false}},"position":{"x":1687.5,"y":387.5},"group":"nodes","removed":false},{"data":{"id":"Connaissance","name":"Connaissance","description":"Acquisition d'informations ou de compétences à travers l'expérience, l'éducation ou la découverte.","additionalInformation":"","type":"term","displayType":"text","xFields":{},"parent":null,"weight":1,"style":{"borderColor":"#808080","backgroundColor":"#FFFFFF","fontColor":"auto","fontSize":"14","fontType":"sans-serif","shape":"round-rectangle","lineStyle":"solid","width":"120","height":"50","breakHyphen":false}},"position":{"x":1687.5,"y":612.5},"group":"nodes","removed":false},{"data":{"id":"Beau","name":"Beau","description":"Qualité esthétique qui évoque un plaisir sensoriel ou intellectuel universellement reconnaissable.","additionalInformation":"","type":"term","displayType":"text","xFields":{},"parent":null,"weight":1,"style":{"borderColor":"#808080","backgroundColor":"#FFFFFF","fontColor":"auto","fontSize":"14","fontType":"sans-serif","shape":"round-rectangle","lineStyle":"solid","width":"120","height":"50","breakHyphen":false}},"position":{"x":312.5,"y":262.5},"group":"nodes","removed":false},{"data":{"id":"Plaisir désintéressé","name":"Plaisir désintéressé","description":"Satisfaction ressentie sans intention personnelle ou gain pratique, souvent associé à l'appréciation de l'art.","additionalInformation":"","type":"term","displayType":"text","xFields":{},"parent":null,"weight":1,"style":{"borderColor":"#808080","backgroundColor":"#FFFFFF","fontColor":"auto","fontSize":"14","fontType":"sans-serif","shape":"round-rectangle","lineStyle":"solid","width":"120","height":"50","breakHyphen":false}},"position":{"x":312.5,"y":-12.5},"group":"nodes","removed":false},{"data":{"id":"Vie","name":"Vie","description":"Condition dynamique et systémique caractérisant les organismes dotés de processus biologiques actifs.","additionalInformation":"","type":"term","displayType":"text","xFields":{},"parent":null,"weight":1,"style":{"borderColor":"#808080","backgroundColor":"#FFFFFF","fontColor":"auto","fontSize":"14","fontType":"sans-serif","shape":"round-rectangle","lineStyle":"solid","width":"120","height":"50","breakHyphen":false}},"position":{"x":987.5,"y":-37.5},"group":"nodes","removed":false},{"data":{"id":"Savoir-faire","name":"Savoir-faire","description":"Compétence acquise par l'expérience dans la pratique de certaines activités, en particulier l'artisanat.","additionalInformation":"","type":"term","displayType":"text","xFields":{},"parent":null,"weight":1,"style":{"borderColor":"#808080","backgroundColor":"#FFFFFF","fontColor":"auto","fontSize":"14","fontType":"sans-serif","shape":"round-rectangle","lineStyle":"solid","width":"120","height":"50","breakHyphen":false}},"position":{"x":1087.5,"y":-187.5},"group":"nodes","removed":false},{"data":{"id":"Règles","name":"Règles","description":"Directives ou principes qui gouvernent le fonctionnement, le comportement ou la pratique dans divers domaines.","additionalInformation":"","type":"term","displayType":"text","xFields":{},"parent":null,"weight":1,"style":{"borderColor":"#808080","backgroundColor":"#FFFFFF","fontColor":"auto","fontSize":"14","fontType":"sans-serif","shape":"round-rectangle","lineStyle":"solid","width":"120","height":"50","breakHyphen":false}},"position":{"x":737.5,"y":-187.5},"group":"nodes","removed":false},{"data":{"id":"Génie","name":"Génie","description":"Capacité exceptionnelle de création ou d'innovation dans les arts, montrant souvent une originalité naturelle.","additionalInformation":"","type":"term","displayType":"text","xFields":{},"parent":null,"weight":1,"style":{"borderColor":"#808080","backgroundColor":"#FFFFFF","fontColor":"auto","fontSize":"14","fontType":"sans-serif","shape":"round-rectangle","lineStyle":"solid","width":"120","height":"50","breakHyphen":false}},"position":{"x":562.5,"y":-12.5},"group":"nodes","removed":false}],"edges":[{"data":{"id":"01a89038-bb33-0b36-a364-b322d5005650","name":"gouvernent","description":"","drawType":"normal","additionalInformation":"","bendPoints":null,"controlPoints":null,"cardinality":{"name":"","indicator":""},"cardinalitySource":{"name":"","indicator":""},"target":"Savoir-faire","source":"Règles","weight":1,"xFields":{},"style":{"lineColor":"#808080","fontColor":"#000000","lineStyle":"solid","curve":"bezier","lineWidth":2,"autoRelationColor":"None","fontSize":"12px","fontType":"Arial","arrowPosition":"target"}},"position":{"x":0,"y":0},"group":"edges","removed":false},{"data":{"id":"e06ad1a8-cf7b-d9c7-c87d-089fc12f4893","name":"basé sur","description":"","drawType":"normal","additionalInformation":"","bendPoints":null,"controlPoints":null,"cardinality":{"name":"","indicator":""},"cardinalitySource":{"name":"","indicator":""},"target":"Savoir-faire","source":"Artisanat","weight":1,"xFields":{},"style":{"lineColor":"#808080","fontColor":"#000000","lineStyle":"solid","curve":"bezier","lineWidth":2,"autoRelationColor":"None","fontSize":"12px","fontType":"Arial","arrowPosition":"target"}},"position":{"x":0,"y":0},"group":"edges","removed":false},{"data":{"id":"0fc160b7-5849-46d8-4e4f-d728432da28d","name":"est une forme de","description":"","drawType":"normal","additionalInformation":"","bendPoints":null,"controlPoints":null,"cardinality":{"name":"","indicator":""},"cardinalitySource":{"name":"","indicator":""},"target":"Technique","source":"Art","weight":1,"xFields":{},"style":{"lineColor":"#808080","fontColor":"#000000","lineStyle":"solid","curve":"bezier","lineWidth":2,"autoRelationColor":"None","fontSize":"12px","fontType":"Arial","arrowPosition":"target"}},"position":{"x":0,"y":0},"group":"edges","removed":false},{"data":{"id":"d9f5bad4-0fe8-6197-9eb2-299dd1b0ef0b","name":"est une forme de","description":"","drawType":"normal","additionalInformation":"","bendPoints":null,"controlPoints":null,"cardinality":{"name":"","indicator":""},"cardinalitySource":{"name":"","indicator":""},"target":"Imitation","source":"Art","weight":1,"xFields":{},"style":{"lineColor":"#808080","fontColor":"#000000","lineStyle":"solid","curve":"bezier","lineWidth":2,"autoRelationColor":"None","fontSize":"12px","fontType":"Arial","arrowPosition":"target"}},"position":{"x":0,"y":0},"group":"edges","removed":false},{"data":{"id":"13b6a98b-54b2-1970-72f4-46a14f783756","name":"est une forme de","description":"","drawType":"normal","additionalInformation":"","bendPoints":null,"controlPoints":null,"cardinality":{"name":"","indicator":""},"cardinalitySource":{"name":"","indicator":""},"target":"Expression esthétique","source":"Art","weight":1,"xFields":{},"style":{"lineColor":"#808080","fontColor":"#000000","lineStyle":"solid","curve":"bezier","lineWidth":2,"autoRelationColor":"None","fontSize":"12px","fontType":"Arial","arrowPosition":"target"}},"position":{"x":0,"y":0},"group":"edges","removed":false},{"data":{"id":"9e420e12-9ada-4d90-a7b5-0c372ab71281","name":"inclut","description":"","drawType":"normal","additionalInformation":"","bendPoints":null,"controlPoints":null,"cardinality":{"name":"","indicator":""},"cardinalitySource":{"name":"","indicator":""},"target":"Artisanat","source":"Technique","weight":1,"xFields":{},"style":{"lineColor":"#808080","fontColor":"#000000","lineStyle":"solid","curve":"bezier","lineWidth":2,"autoRelationColor":"None","fontSize":"12px","fontType":"Arial","arrowPosition":"target"}},"position":{"x":0,"y":0},"group":"edges","removed":false},{"data":{"id":"580ce426-c475-1049-bfa3-2f5519124803","name":"critiqué par","description":"","drawType":"normal","additionalInformation":"","bendPoints":null,"controlPoints":null,"cardinality":{"name":"","indicator":""},"cardinalitySource":{"name":"","indicator":""},"target":"Platon","source":"Imitation","weight":1,"xFields":{},"style":{"lineColor":"#808080","fontColor":"#000000","lineStyle":"solid","curve":"bezier","lineWidth":2,"autoRelationColor":"None","fontSize":"12px","fontType":"Arial","arrowPosition":"target"}},"position":{"x":0,"y":0},"group":"edges","removed":false},{"data":{"id":"ef8b87b3-92f5-1f90-1696-e2f20064cd61","name":"soutenu par","description":"","drawType":"normal","additionalInformation":"","bendPoints":null,"controlPoints":null,"cardinality":{"name":"","indicator":""},"cardinalitySource":{"name":"","indicator":""},"target":"Aristote","source":"Imitation","weight":1,"xFields":{},"style":{"lineColor":"#808080","fontColor":"#000000","lineStyle":"solid","curve":"bezier","lineWidth":2,"autoRelationColor":"None","fontSize":"12px","fontType":"Arial","arrowPosition":"target"}},"position":{"x":0,"y":0},"group":"edges","removed":false},{"data":{"id":"5ab86662-9e40-355d-b263-4b700afe9995","name":"éloigne de","description":"","drawType":"normal","additionalInformation":"","bendPoints":null,"controlPoints":null,"cardinality":{"name":"","indicator":""},"cardinalitySource":{"name":"","indicator":""},"target":"Vérité","source":"Platon","weight":1,"xFields":{},"style":{"lineColor":"#808080","fontColor":"#000000","lineStyle":"solid","curve":"bezier","lineWidth":2,"autoRelationColor":"None","fontSize":"12px","fontType":"Arial","arrowPosition":"target"}},"position":{"x":0,"y":0},"group":"edges","removed":false},{"data":{"id":"973afb26-2902-e60a-dd78-50441cc2067e","name":"conduit à","description":"","drawType":"normal","additionalInformation":"","bendPoints":null,"controlPoints":null,"cardinality":{"name":"","indicator":""},"cardinalitySource":{"name":"","indicator":""},"target":"Connaissance","source":"Aristote","weight":1,"xFields":{},"style":{"lineColor":"#808080","fontColor":"#000000","lineStyle":"solid","curve":"bezier","lineWidth":2,"autoRelationColor":"None","fontSize":"12px","fontType":"Arial","arrowPosition":"target"}},"position":{"x":0,"y":0},"group":"edges","removed":false},{"data":{"id":"6721441c-921f-6ebc-b1f9-6c7578793c05","name":"exploré par","description":"","drawType":"normal","additionalInformation":"","bendPoints":null,"controlPoints":null,"cardinality":{"name":"","indicator":""},"cardinalitySource":{"name":"","indicator":""},"target":"Kant","source":"Expression esthétique","weight":1,"xFields":{},"style":{"lineColor":"#808080","fontColor":"#000000","lineStyle":"solid","curve":"bezier","lineWidth":2,"autoRelationColor":"None","fontSize":"12px","fontType":"Arial","arrowPosition":"target"}},"position":{"x":0,"y":0},"group":"edges","removed":false},{"data":{"id":"db9ca612-472e-3457-651b-fabf4c5ec808","name":"exploré par","description":"","drawType":"normal","additionalInformation":"","bendPoints":null,"controlPoints":null,"cardinality":{"name":"","indicator":""},"cardinalitySource":{"name":"","indicator":""},"target":"Hegel","source":"Expression esthétique","weight":1,"xFields":{},"style":{"lineColor":"#808080","fontColor":"#000000","lineStyle":"solid","curve":"bezier","lineWidth":2,"autoRelationColor":"None","fontSize":"12px","fontType":"Arial","arrowPosition":"target"}},"position":{"x":0,"y":0},"group":"edges","removed":false},{"data":{"id":"f8429b37-e344-77ce-bcf7-96ac4237474b","name":"exploré par","description":"","drawType":"normal","additionalInformation":"","bendPoints":null,"controlPoints":null,"cardinality":{"name":"","indicator":""},"cardinalitySource":{"name":"","indicator":""},"target":"Nietzsche","source":"Expression esthétique","weight":1,"xFields":{},"style":{"lineColor":"#808080","fontColor":"#000000","lineStyle":"solid","curve":"bezier","lineWidth":2,"autoRelationColor":"None","fontSize":"12px","fontType":"Arial","arrowPosition":"target"}},"position":{"x":0,"y":0},"group":"edges","removed":false},{"data":{"id":"765a7816-1549-9973-513c-b312e9d0a057","name":"définit","description":"","drawType":"normal","additionalInformation":"","bendPoints":null,"controlPoints":null,"cardinality":{"name":"","indicator":""},"cardinalitySource":{"name":"","indicator":""},"target":"Beau","source":"Kant","weight":1,"xFields":{},"style":{"lineColor":"#808080","fontColor":"#000000","lineStyle":"solid","curve":"bezier","lineWidth":2,"autoRelationColor":"None","fontSize":"12px","fontType":"Arial","arrowPosition":"target"}},"position":{"x":0,"y":0},"group":"edges","removed":false},{"data":{"id":"8e7ccd90-72d4-e902-37ea-d35c5a662b18","name":"associé à","description":"","drawType":"normal","additionalInformation":"","bendPoints":null,"controlPoints":null,"cardinality":{"name":"","indicator":""},"cardinalitySource":{"name":"","indicator":""},"target":"Plaisir désintéressé","source":"Beau","weight":1,"xFields":{},"style":{"lineColor":"#808080","fontColor":"#000000","lineStyle":"solid","curve":"bezier","lineWidth":2,"autoRelationColor":"None","fontSize":"12px","fontType":"Arial","arrowPosition":"target"}},"position":{"x":0,"y":0},"group":"edges","removed":false},{"data":{"id":"8125e9d9-3ddd-6e4c-b6ad-7779347aaa4e","name":"crée","description":"","drawType":"normal","additionalInformation":"","bendPoints":null,"controlPoints":null,"cardinality":{"name":"","indicator":""},"cardinalitySource":{"name":"","indicator":""},"target":"Règles","source":"Génie","weight":1,"xFields":{},"style":{"lineColor":"#808080","fontColor":"#000000","lineStyle":"solid","curve":"bezier","lineWidth":2,"autoRelationColor":"None","fontSize":"12px","fontType":"Arial","arrowPosition":"target"}},"position":{"x":0,"y":0},"group":"edges","removed":false},{"data":{"id":"66417a95-2de5-4398-2916-327b4f93ccc8","name":"introduit le concept","description":"","drawType":"normal","additionalInformation":"","bendPoints":null,"controlPoints":null,"cardinality":{"name":"","indicator":""},"cardinalitySource":{"name":"","indicator":""},"target":"Génie","source":"Kant","weight":1,"xFields":{},"style":{"lineColor":"#808080","fontColor":"#000000","lineStyle":"solid","curve":"bezier","lineWidth":2,"autoRelationColor":"None","fontSize":"12px","fontType":"Arial","arrowPosition":"target"}},"position":{"x":0,"y":0},"group":"edges","removed":false},{"data":{"id":"fc3bd976-87aa-c930-9690-a809279f3d8a","name":"stimulé par","description":"","drawType":"normal","additionalInformation":"","bendPoints":null,"controlPoints":null,"cardinality":{"name":"","indicator":""},"cardinalitySource":{"name":"","indicator":""},"target":"Vie","source":"Nietzsche","weight":1,"xFields":{},"style":{"lineColor":"#808080","fontColor":"#000000","lineStyle":"solid","curve":"bezier","lineWidth":2,"autoRelationColor":"None","fontSize":"12px","fontType":"Arial","arrowPosition":"target"}},"position":{"x":0,"y":0},"group":"edges","removed":false}]},"data":{},"zoomingEnabled":true,"userZoomingEnabled":true,"zoom":0.33665203655420545,"minZoom":1e-50,"maxZoom":1.2,"panningEnabled":true,"userPanningEnabled":true,"pan":{"x":667.0640471248915,"y":340.1624354915952},"boxSelectionEnabled":true,"renderer":{"name":"canvas"},"wheelSensitivity":0.5};
        function getContrastYIQ(hexcolor) {
        hexcolor = hexcolor.replace('#', '')
        var r = parseInt(hexcolor.substr(0, 2), 16)
        var g = parseInt(hexcolor.substr(2, 2), 16)
        var b = parseInt(hexcolor.substr(4, 2), 16)
        var yiq = (r * 299 + g * 587 + b * 114) / 1000
        return yiq >= 128 ? '#000000' : '#FFFFFF'
      }
     
        window.cytoscape = cytoscape({
          container: document.getElementById('cy'),
          ...cytoConfig
        })
        let cy = window.cytoscape
        cy.edgeEditing(edgeBConfig)
        cy.json(cytoJSON)
        cy.json({ maxZoom: 2 })
        cy.edgeEditing('get').initAnchorPoints(
          cy.edges()
        )
        
        dragElement(document.getElementById("sidebar"));
        cy.on('tap', function(event) {
          if (event.target === cy) {
            document.getElementById('sidebar').style.display="none"
          }

        })
        
        cy.on('tap',  'node,edge', function(event) {
            let element = event.target
            showDefinition(element)
        })
      cy.autoungrabify(true)
        dragElement(document.getElementById("sidebar"));

        function dragElement(elmnt) {
          var pos1 = 0, pos2 = 0, pos3 = 0, pos4 = 0;
          if (document.getElementById(elmnt.id + "header")) {
            // if present, the header is where you move the DIV from:
            document.getElementById(elmnt.id + "header").onmousedown = dragMouseDown;
          } else {
            // otherwise, move the DIV from anywhere inside the DIV:
            elmnt.onmousedown = dragMouseDown;
          }

          function dragMouseDown(e) {
            e = e || window.event;
            e.preventDefault();
            // get the mouse cursor position at startup:
            pos3 = e.clientX;
            pos4 = e.clientY;
            document.onmouseup = closeDragElement;
            // call a function whenever the cursor moves:
            document.onmousemove = elementDrag;
          }

          function elementDrag(e) {
            e = e || window.event;
            e.preventDefault();
            // calculate the new cursor position:
            pos1 = pos3 - e.clientX;
            pos2 = pos4 - e.clientY;
            pos3 = e.clientX;
            pos4 = e.clientY;
            // set the element's new position:
            elmnt.style.top = (elmnt.offsetTop - pos2) + "px";
            elmnt.style.left = (elmnt.offsetLeft - pos1) + "px";
          }

          function closeDragElement() {
            // stop moving when mouse button is released:
            document.onmouseup = null;
            document.onmousemove = null;
          }
        }
      
    function showDefinition(elm) {
      console.log(elm)
      let data=elm.data()
      document.getElementById('sidebar').style.display="inline-block"
        document.getElementById('sidebarcontent').innerHTML =
          '<strong>' +
          data.name +
          '</strong>' +
          '<br>' +
          data.description +
          '<hr>' +
          data.additionalInformation
    }
    function centerElement(elm) {
        window.cytoscape.center(elm)
        elm.select()
        showDefinition(elm)
      }
    function updateSearch() {
      let input = document.getElementById('myInput');
      let searchResultsDiv = document.getElementById('searchresults');
      let filter = input.value.toUpperCase();
      let resultList = document.getElementById("result-list");
      let resultMessage = document.getElementById("result-message");
      resultList.innerHTML = '';
      resultMessage.innerHTML ='';
      if (filter.length == 0) {
        searchResultsDiv.style.display="none"
      } else {
        searchResultsDiv.style.display="inline-block"
      }
      if (filter.length<2) {
        resultMessage.innerHTML ="Type at least 2 characters"
        return
      }
      let cy = window.cytoscape
      let sel = cy.elements('[name @*= "' + filter + '"]')
      if (sel.size() ==0) {
        resultMessage.innerHTML ="No matching results"
        return
      }
      sel.forEach(r => {
        let li = document.createElement("li");
        li.innerHTML = r.data('name');
        li.onclick = function() { centerElement(r); searchResultsDiv.style.display="none"; input.value=""}
        resultList.appendChild(li);
      })
    }
document.getElementById("myInput").onkeyup = function () { updateSearch() };}) </script></head><body><div id="cy"></div><div id="sidebar"><div id="sidebarheader"> </div> <div id="sidebarcontent"> Click on an element to view the definition. <br />This panel is movable (blue bar) and resizable (right bottom corner)</div></div><div id="titlename"></div><div id="searchbox"><input type="text" id="myInput"  placeholder="Search for names.."></div><div id="searchresults"><div id="result-message"></div><ul id="result-list"></ul></div><div id="tbnote"> This page is generated with <a href="https://termboard.com/" target="_blank">TermBoard.com</a></div></body></html>